(()=>{"use strict";var e={341:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TrimComments=void 0;const o=s(492),r=n(s(920)),l=n(s(278));function*i(e){const t=new RegExp(/\r?\n/,"g");let s,n;for(;n=t.lastIndex,s=t.exec(e);)yield e.slice(n,s.index);yield e.slice(n)}const u=new Map([[".js","babel"],[".json","json"]]);class d extends o.Transform{constructor(){super({objectMode:!0})}async _transform(e,t,s){try{if(null===e.contents)throw new Error("File error");const t=u.get(e.extname);if(void 0===t)throw new Error("Applies only to .json and .js files!");let n=e.contents.toString();n=await r.default.format(n,{parser:t});const o=new l.default;let d="";[...i(n)].forEach((e=>{d+=o.trim(e)})),d=await r.default.format(d,{parser:t}),e.contents=Buffer.from(d),s(null,e)}catch(e){s(e)}}}t.TrimComments=d},278:e=>{e.exports=class{constructor(){this.lookForClosed=-1}init(e){this.line=e,this.length=e.length,this.indexesOfQuotesAndRegexp=this.getQuotesAndRegexpIndexes(this.getQuotesIndexes(e),this.getRegexpIndexes(e))}getQuotesIndexes(e){const t=new RegExp(/(['"`]).*?\1/,"g"),s=[];let n;for(;n=t.exec(e);)s.push([n.index,t.lastIndex-1]);return s}getRegexpIndexes(e){const t=new RegExp(/(?<=[\s(])\/[^/*].*\/(?=[\s).,;gmisdyuv])/,"g"),s=[];let n;for(;n=t.exec(e);)s.push([n.index,t.lastIndex-1]);return s}getQuotesAndRegexpIndexes(e,t){const s=[];for(const n of t){const[t,o]=n,r=e.length;let l=0;for(;l<r;){const[s,n]=e[l];if(t>s&&o<n)break;l++}l===r&&s.push(n)}return[...e,...s]}isNotInQuotesAndRegexp(e){for(const[t,s]of this.indexesOfQuotesAndRegexp)if(t<e&&s>e)return!1;return!0}getDoubleSlashCommentIndex(e){const t=new RegExp(/\/\//,"g"),s=[];let n;for(;n=t.exec(e);){const e=n.index;if(this.isNotInQuotesAndRegexp(e)){s.push([e,this.length]);break}}return s}getMultiCommentIndexes(e){const t=new RegExp(/\/\*/,"g"),s=new RegExp(/\*\//,"g"),n=[];return this.lookForClosed>-1?null===s.exec(e)?n.push([0,this.length]):(this.lookForClosed=-1,n.push([0,s.lastIndex]),t.lastIndex=s.lastIndex,n.push(...this.getMultiCommentIndexesWithoutLookForClosed(e,t,s))):n.push(...this.getMultiCommentIndexesWithoutLookForClosed(e,t,s)),n}getMultiCommentIndexesWithoutLookForClosed(e,t,s){const n=[];let o;for(;o=t.exec(e);){const r=o.index;if(this.isNotInQuotesAndRegexp(r)){if(s.lastIndex=t.lastIndex,null===s.exec(e)){this.lookForClosed=r,n.push([r,this.length]);break}n.push([r,s.lastIndex]),t.lastIndex=s.lastIndex}}return n}mergeDoubleSlashCommentAndMultiComments(e,t){if(0===e.length&&0===t.length)return[];if(e.length>0&&0===t.length)return e;if(0===e.length&&t.length>0)return t;const[s]=e[0];let n=t.flat().concat(s).sort(((e,t)=>e-t));const o=n.indexOf(s);if(o%2==1)return t;{s<this.lookForClosed&&(this.lookForClosed=-1),n=n.slice(0,o+1).concat(this.length);const e=[];for(let t=0;t<n.length;t+=2){const s=[];for(let e=t;e<t+2;e++)s.push(n[e]);e.push(s)}return e}}trim(e){this.init(e);const t=this.getDoubleSlashCommentIndex(e),s=this.getMultiCommentIndexes(e),n=this.mergeDoubleSlashCommentAndMultiComments(t,s);if(0===n.length)return e;let o=0,r="";return n.forEach((([t,s])=>{r+=e.slice(o,t),o=s})),r+=e.slice(o,this.length),r}reset(){this.lookForClosed=-1,this.init("")}}},920:e=>{e.exports=require("prettier")},492:e=>{e.exports=require("node:stream")}},t={},s=function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}(341),n=exports;for(var o in s)n[o]=s[o];s.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();